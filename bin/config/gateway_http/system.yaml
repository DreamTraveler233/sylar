server:
    work_path: bin/apps/work/gateway_http
    pid_file: gateway_http.pid

# 内存池开关（用于 IO 热路径 buffer 复用）
mempool:
    enable: 1

# 认证与安全配置
auth:
    jwt:
        secret: "dev-secret-change-me"
        issuer: "auth-service"
        expires_in: 3600

# 服务发现配置 (Zookeeper)
service_discovery.zk: "127.0.0.1:2181"

presence.rpc_addr: "127.0.0.1:8070"

# Stage 3: message service
message.rpc_addr: "127.0.0.1:8071"

# Stage 4: user service
user.rpc_addr: "127.0.0.1:8073"

# Stage 4: contact/group services
contact.rpc_addr: "127.0.0.1:8072"
group.rpc_addr: "127.0.0.1:8074"

# Stage 4: talk service
talk.rpc_addr: "127.0.0.1:8075"

# Stage 4/5: media service
media.rpc_addr: "127.0.0.1:8076"

# 机器编码配置（用于区分不同机器，范围是 0~1023）
machine:
    code: "0"

# RSA 密钥配置
crypto:
    rsa_private_key_path: "keys/rsa_private_2048.pem"
    rsa_public_key_path: "keys/rsa_public_rsa_2048.pem"
    padding: "PKCS1"

# MySQL 数据源配置
mysql.dbs:
    default:
        host: "localhost" # 数据库主机地址
        port: 3306 # 数据库端口
        user: "im" # 数据库用户名
        passwd: "Im@642157" # 数据库密码
        dbname: "im_db" #  数据库名称
        pool: 10 # 连接池大小

# Redis 配置 (用于分布式会话和缓存)
redis.config:
    default:
        host: "127.0.0.1:6379"
        passwd: "Im@642157"
        log_enable: "1"
        timeout: "1000"

# WebSocket 配置
websocket:
    allow_unmasked_client_frames: 1   # 是否允许客户端未掩码帧（0严格遵循RFC，1兼容）
    message:
        max_size: 33554432               # 单条消息最大尺寸（32MB）